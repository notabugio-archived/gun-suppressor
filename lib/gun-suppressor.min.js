!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("ramda"),require("route-parser"),require("route-parser/lib/route/visitors/regexp"),require("ajv")):"function"==typeof define&&define.amd?define("gun-suppressor",["ramda","route-parser","route-parser/lib/route/visitors/regexp","ajv"],t):"object"==typeof exports?exports["gun-suppressor"]=t(require("ramda"),require("route-parser"),require("route-parser/lib/route/visitors/regexp"),require("ajv")):e["gun-suppressor"]=t(e.ramda,e["route-parser"],e["route-parser/lib/route/visitors/regexp"],e.ajv)}("undefined"!=typeof self?self:this,function(e,t,r,n){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initAjv=m,t.createSuppressor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.init,r=void 0===t?m:t,a=e.id,s=void 0===a?"http://example.com/schemas/gun-schema.json":a,u=e.jsonSchema,d=void 0===u?"http://json-schema.org/draft-07/schema#":u,l=e.title,f=void 0===l?"Gun Message Schema":l,y=e.description,g=void 0===y?"A defintion for the gunDB wire protocol":y,h=e.definitions,b=void 0===h?c:h,v=[],j=(0,n.keys)(b).reduce(function(e,t){var r=(0,n.path)([t,"soul"],e)||{},a=r.pattern;if(!a)return e;var s,u=new o.default(a),d=function(t){var r=(0,n.path)(t,e),o=(0,n.prop)("$refs",r),i=(0,n.prop)("refName",p.match(o||""));return i?(0,n.prop)(i,e):r};return v.push(t),(0,n.compose)((0,n.assocPath)([t,"$async"],!0),(0,n.assoc)("".concat(t,"Soul"),{type:"string",pattern:function(e){var t=i.default.visit(e.ast).re.toString();return t.slice(1,t.length-1)}(u)}),(0,n.assoc)("".concat(t,"Edge"),{type:"object",additionalProperties:!1,properties:{"#":{$ref:"#/definitions/".concat(t,"Soul")}},required:["#"]}),(0,n.assocPath)([t,"required"],[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(s=(0,n.path)([t,"required"],e)||[])||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}(),["_"])),(0,n.assocPath)([t,"properties","_"],{type:"object",allOf:[{$ref:"#/definitions/GunNodeMeta"}],properties:{"#":{$ref:"#/definitions/".concat(t,"Soul")},">":{type:"object",properties:(0,n.keys)(d([t,"properties"])).reduce(function(e,t){return(0,n.assoc)(t,{type:"number"},e)},{}),patternProperties:(0,n.keys)(d([t,"patternProperties"])).reduce(function(e,t){return(0,n.assoc)(t,{type:"number"},e)},{})}}}))(e)},b),S={$id:s,$schema:d,$async:!0,title:f,description:g,anyOf:[{$ref:"#/definitions/GunMsg"}],definitions:{GunMsg:{$async:!0,type:"object",additionalProperties:!1,properties:{"#":{title:"Message Identifier",description:"This should be a globally unique identifier",type:"string"},"##":{title:"Fast Hash Value?",description:"I have no idea how this is calculated",type:"number"},"@":{title:"Responding To",description:"The message identifier this message is responding to",type:"string"},"><":{title:"Adjacent Peers",description:"Not really sure how this works",type:"string"},ok:{title:"??",description:"Shouldn't actually be sent over wire",type:"boolean"},how:{title:"Used for debugging",description:"Shouldn't actually be sent over wire (but it is)",type:"string"},mesh:{title:"??",description:"Shouldn't be sent over wire"},err:{anyOf:[{type:"null"},{type:"string"}]},leech:{title:"Leech Command",description:"Gun protocol extension added by pistol",type:"boolean"},get:{title:"Get Command",description:"A request for graph data",type:"object",additionalProperties:!1,required:["#"],properties:{"#":{description:"The soul to request data for",anyOf:v.map(function(e){return{$ref:"#/definitions/".concat(e,"Soul")}})},".":{description:"Request a single property?",type:"string"}}},put:{$async:!0,title:"Put Command",description:"A payload of graph data",type:"object",additionalProperties:{anyOf:v.map(function(e){return{$ref:"#/definitions/".concat(e)}})}}}},GunChangeStates:{type:"object",title:"Gun Change States",description:"A map of property names to update timestamps",patternProperties:{".*":{type:"number"}}},GunNodeMeta:{title:"Gun Node Metadata",description:"Change State and soul of a gun node",type:"object",additionalProperties:!1,properties:{"#":{title:"Soul",type:"string"},">":{$ref:"#/definitions/GunChangeStates"}},required:["#",">"]},GunEdge:{type:"object",additionalProperties:!1,properties:{"#":{type:"string"}},required:["#"]},...j}},P=r();return P.addSchema({$id:"schema.json",definitions:S.definitions}),{schema:S,validate:P.compile(S)}},t.PERMISSIVE_SCHEMA=void 0;var n=r(1),o=s(r(2)),i=s(r(3)),a=s(r(4));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=new o.default("#/definitions/:refName");var d={Node:{title:"Gun Node",description:"Any node supported by gun",$async:!0,additionalProperties:{anyOf:[{$ref:"#/definitions/GunEdge"},{type:"null"},{type:"string"},{type:"number"},{type:"boolean"}]},soul:{pattern:"*soul",properties:{soul:{type:"string"}},required:["soul"]}}};t.PERMISSIVE_SCHEMA=d;var c=d,l=function(e){return function(t,r){var i=t||{},a=i.pattern,s=u(i,["pattern"]),p=a&&new o.default(a);return function(t,r,o,i){var u=(0,n.path)(["_","#"],t);if(!u||!a||u!==i)return!1;var d=p.match(u);return!!d&&e.compile(s)(d)}}},f=function(e,t){var r=(0,n.path)(["soul","pattern"],t),i=r&&new o.default(r);return function(t){var r=(0,n.path)(["_","#"],t),o=i.match(r)||{};return!(0,n.keys)(e).find(function(r){return r in t&&(0,n.prop)(r,o)!==(0,n.prop)((0,n.prop)(r,e),t)})}},y=function(e){return function(e){return function(t,r,o,i){return!e||(0,n.prop)("#",t)===i}}};function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.coerceTypes,r=void 0===t||t,n=e.removeAdditional,o=void 0!==n&&n,i=u(e,["coerceTypes","removeAdditional"]),s=new a.default({coerceTypes:r,removeAdditional:o,...i});return s.addKeyword("soul",{compile:l(s)}),s.addKeyword("edgeMatchesKey",{compile:y(s)}),s.addKeyword("propsFromSoul",{compile:f}),s}},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=n}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ndW4tc3VwcHJlc3Nvci93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vZ3VuLXN1cHByZXNzb3Ivd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vZ3VuLXN1cHByZXNzb3IvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZ3VuLXN1cHByZXNzb3IvZXh0ZXJuYWwgXCJyYW1kYVwiIiwid2VicGFjazovL2d1bi1zdXBwcmVzc29yL2V4dGVybmFsIFwicm91dGUtcGFyc2VyXCIiLCJ3ZWJwYWNrOi8vZ3VuLXN1cHByZXNzb3IvZXh0ZXJuYWwgXCJyb3V0ZS1wYXJzZXIvbGliL3JvdXRlL3Zpc2l0b3JzL3JlZ2V4cFwiIiwid2VicGFjazovL2d1bi1zdXBwcmVzc29yL2V4dGVybmFsIFwiYWp2XCIiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwicmVxdWlyZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJ0aGlzIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMV9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMl9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fM19fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNF9fIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9yZWYzIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiX3JlZjMkaW5pdCIsImluaXQiLCJpbml0QWp2IiwiX3JlZjMkaWQiLCJpZCIsIl9yZWYzJGpzb25TY2hlbWEiLCJqc29uU2NoZW1hIiwiX3JlZjMkdGl0bGUiLCJ0aXRsZSIsIl9yZWYzJGRlc2NyaXB0aW9uIiwiZGVzY3JpcHRpb24iLCJfcmVmMyRkZWZpbml0aW9ucyIsImRlZmluaXRpb25zIiwic3VwcGxpZWQiLCJERUZBVUxUX1NDSEVNQSIsIm5vZGVUeXBlcyIsIl9yYW1kYSIsImtleXMiLCJyZWR1Y2UiLCJkZWZzIiwidHlwZU5hbWUiLCJfcmVmNCIsInBhdGgiLCJwYXR0ZXJuIiwicm91dGUiLCJfcm91dGVQYXJzZXIiLCJkZWZhdWx0IiwicGF0aE9yUmVmIiwidmFsIiwicmVmIiwicHJvcCIsInJlZk5hbWUiLCJyZWZSb3V0ZSIsIm1hdGNoIiwicHVzaCIsImNvbXBvc2UiLCJhc3NvY1BhdGgiLCJhc3NvYyIsImNvbmNhdCIsInR5cGUiLCJyZVN0ciIsIl9yZWdleHAiLCJ2aXNpdCIsImFzdCIsInJlIiwidG9TdHJpbmciLCJzbGljZSIsInJvdXRlVG9SZWdleFN0ciIsImFkZGl0aW9uYWxQcm9wZXJ0aWVzIiwicHJvcGVydGllcyIsIiMiLCIkcmVmIiwicmVxdWlyZWQiLCJhbGxPZiIsIj4iLCJwcm9wcyIsInBhdHRlcm5Qcm9wZXJ0aWVzIiwic2NoZW1hIiwiJGlkIiwiJHNjaGVtYSIsIiRhc3luYyIsImFueU9mIiwiR3VuTXNnIiwiIyMiLCJAIiwiPjwiLCJvayIsImhvdyIsIm1lc2giLCJlcnIiLCJsZWVjaCIsIm1hcCIsIi4iLCJwdXQiLCJHdW5DaGFuZ2VTdGF0ZXMiLCIuKiIsIkd1bk5vZGVNZXRhIiwiR3VuRWRnZSIsImFqdiIsImFkZFNjaGVtYSIsInZhbGlkYXRlIiwiY29tcGlsZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfYWp2IiwiUEVSTUlTU0lWRV9TQ0hFTUEiLCJOb2RlIiwic291bCIsImNvbXBpbGVWYWxpZGF0ZVNvdWwiLCJwYXJlbnRTY2hlbWEiLCJfcmVmIiwibWF0Y2hTY2hlbWEiLCJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMiLCJkYXRhIiwiX2NQYXRoIiwiX3BhcmVudERhdGEiLCJrZXlJblBhcmVudCIsImNvbXBpbGVQcm9wc0Zyb21Tb3VsIiwicHJvcE1hcCIsInNvdWxQcm9wcyIsImZpbmQiLCJwcm9wTmFtZSIsImNvbXBpbGVFZGdlTWF0Y2hlc0tleSIsIl9yZWYyIiwiX3JlZjIkY29lcmNlVHlwZXMiLCJjb2VyY2VUeXBlcyIsIl9yZWYyJHJlbW92ZUFkZGl0aW9uYSIsInJlbW92ZUFkZGl0aW9uYWwiLCJjb25maWciLCJhZGRLZXl3b3JkIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGlCQUFBQyxTQUFBLGlCQUFBQyxPQUNBQSxPQUFBRCxRQUFBRCxFQUFBRyxRQUFBLFNBQUFBLFFBQUEsZ0JBQUFBLFFBQUEsMENBQUFBLFFBQUEsUUFDQSxtQkFBQUMsZUFBQUMsSUFDQUQsT0FBQSx5RkFBQUosR0FDQSxpQkFBQUMsUUFDQUEsUUFBQSxrQkFBQUQsRUFBQUcsUUFBQSxTQUFBQSxRQUFBLGdCQUFBQSxRQUFBLDBDQUFBQSxRQUFBLFFBRUFKLEVBQUEsa0JBQUFDLEVBQUFELEVBQUEsTUFBQUEsRUFBQSxnQkFBQUEsRUFBQSwwQ0FBQUEsRUFBQSxLQVJBLENBU0Msb0JBQUFPLFVBQUFDLEtBQUEsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDRCxtQkNUQSxJQUFBQyxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFiLFFBR0EsSUFBQUMsRUFBQVUsRUFBQUUsR0FBQSxDQUNBQyxFQUFBRCxFQUNBRSxHQUFBLEVBQ0FmLFFBQUEsSUFVQSxPQU5BZ0IsRUFBQUgsR0FBQUksS0FBQWhCLEVBQUFELFFBQUFDLElBQUFELFFBQUFZLEdBR0FYLEVBQUFjLEdBQUEsRUFHQWQs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QUFFLEVBQUFILEVBRk5JLHdCQUVNLElBQUFELEtBREhFLEVBQ0doQixFQUFBVyxFQUFBLG9DQUNBeEIsRUFBTSxJQUFBSyxFQUFBekQsUUFBUSxDQUFFOEUsY0FBYUUsc0JBQXFCQyxJQUt4RCxPQUhBN0IsRUFBSThCLFdBQVcsT0FBUSxDQUFFM0IsUUFBU00sRUFBb0JULEtBQ3REQSxFQUFJOEIsV0FBVyxpQkFBa0IsQ0FBRTNCLFFBQVNvQixFQUFzQnZCLEtBQ2xFQSxFQUFJOEIsV0FBVyxnQkFBaUIsQ0FBRTNCLFFBQVNlLElBQ3BDbEIsa0JDdEZUL0gsRUFBQUQsUUFBQU8saUJDQUFOLEVBQUFELFFBQUFRLGlCQ0FBUCxFQUFBRCxRQUFBUyxpQkNBQVIsRUFBQUQsUUFBQVUiLCJmaWxlIjoiZ3VuLXN1cHByZXNzb3IubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwicmFtZGFcIiksIHJlcXVpcmUoXCJyb3V0ZS1wYXJzZXJcIiksIHJlcXVpcmUoXCJyb3V0ZS1wYXJzZXIvbGliL3JvdXRlL3Zpc2l0b3JzL3JlZ2V4cFwiKSwgcmVxdWlyZShcImFqdlwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcImd1bi1zdXBwcmVzc29yXCIsIFtcInJhbWRhXCIsIFwicm91dGUtcGFyc2VyXCIsIFwicm91dGUtcGFyc2VyL2xpYi9yb3V0ZS92aXNpdG9ycy9yZWdleHBcIiwgXCJhanZcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiZ3VuLXN1cHByZXNzb3JcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJyYW1kYVwiKSwgcmVxdWlyZShcInJvdXRlLXBhcnNlclwiKSwgcmVxdWlyZShcInJvdXRlLXBhcnNlci9saWIvcm91dGUvdmlzaXRvcnMvcmVnZXhwXCIpLCByZXF1aXJlKFwiYWp2XCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJndW4tc3VwcHJlc3NvclwiXSA9IGZhY3Rvcnkocm9vdFtcInJhbWRhXCJdLCByb290W1wicm91dGUtcGFyc2VyXCJdLCByb290W1wicm91dGUtcGFyc2VyL2xpYi9yb3V0ZS92aXNpdG9ycy9yZWdleHBcIl0sIHJvb3RbXCJhanZcIl0pO1xufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzFfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18zX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzRfXykge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCB7IGNvbXBvc2UsIGtleXMsIGFzc29jLCBhc3NvY1BhdGgsIHByb3AsIHBhdGggfSBmcm9tIFwicmFtZGFcIjtcbmltcG9ydCBSb3V0ZSBmcm9tIFwicm91dGUtcGFyc2VyXCI7XG5pbXBvcnQgUm91dGVSZWdleHBWaXNpdG9yIGZyb20gXCJyb3V0ZS1wYXJzZXIvbGliL3JvdXRlL3Zpc2l0b3JzL3JlZ2V4cFwiO1xuaW1wb3J0IEFqdiBmcm9tIFwiYWp2XCI7XG5cbmNvbnN0IHJlZlJvdXRlID0gbmV3IFJvdXRlKFwiIy9kZWZpbml0aW9ucy86cmVmTmFtZVwiKTtcblxuZnVuY3Rpb24gcm91dGVUb1JlZ2V4U3RyKHJvdXRlKSB7XG4gIGNvbnN0IHsgcmUgfSA9IFJvdXRlUmVnZXhwVmlzaXRvci52aXNpdChyb3V0ZS5hc3QpO1xuICBjb25zdCByZVN0ciA9IHJlLnRvU3RyaW5nKCk7XG5cbiAgcmV0dXJuIHJlU3RyLnNsaWNlKDEsIHJlU3RyLmxlbmd0aCAtIDEpO1xufVxuXG5leHBvcnQgY29uc3QgUEVSTUlTU0lWRV9TQ0hFTUEgPSB7XG4gIE5vZGU6IHtcbiAgICB0aXRsZTogXCJHdW4gTm9kZVwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkFueSBub2RlIHN1cHBvcnRlZCBieSBndW5cIixcbiAgICAkYXN5bmM6IHRydWUsXG4gICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IHtcbiAgICAgIGFueU9mOiBbXG4gICAgICAgIHsgJHJlZjogXCIjL2RlZmluaXRpb25zL0d1bkVkZ2VcIiB9LFxuICAgICAgICB7IHR5cGU6IFwibnVsbFwiIH0sXG4gICAgICAgIHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuICAgICAgICB7IHR5cGU6IFwibnVtYmVyXCIgfSxcbiAgICAgICAgeyB0eXBlOiBcImJvb2xlYW5cIiB9XG4gICAgICBdXG4gICAgfSxcbiAgICBzb3VsOiB7XG4gICAgICBwYXR0ZXJuOiBcIipzb3VsXCIsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHNvdWw6IHsgdHlwZTogXCJzdHJpbmdcIiB9XG4gICAgICB9LFxuICAgICAgcmVxdWlyZWQ6IFtcInNvdWxcIl1cbiAgICB9XG4gIH1cbn07XG5cbmNvbnN0IERFRkFVTFRfU0NIRU1BID0gUEVSTUlTU0lWRV9TQ0hFTUE7XG5cbmNvbnN0IGNvbXBpbGVWYWxpZGF0ZVNvdWwgPSBhanYgPT4gKHNjaGVtYSwgcGFyZW50U2NoZW1hKSA9PiB7XG4gIGNvbnN0IHsgcGF0dGVybiwgLi4ubWF0Y2hTY2hlbWEgfSA9IHNjaGVtYSB8fCB7fTtcbiAgY29uc3Qgcm91dGUgPSBwYXR0ZXJuICYmIG5ldyBSb3V0ZShwYXR0ZXJuKTtcblxuICByZXR1cm4gKGRhdGEsIF9jUGF0aCwgX3BhcmVudERhdGEsIGtleUluUGFyZW50KSA9PiB7XG4gICAgY29uc3Qgc291bCA9IHBhdGgoW1wiX1wiLCBcIiNcIl0sIGRhdGEpO1xuXG4gICAgaWYgKCFzb3VsIHx8ICFwYXR0ZXJuIHx8IHNvdWwgIT09IGtleUluUGFyZW50KSByZXR1cm4gZmFsc2U7XG4gICAgY29uc3QgbWF0Y2ggPSByb3V0ZS5tYXRjaChzb3VsKTtcblxuICAgIHJldHVybiBtYXRjaCA/IGFqdi5jb21waWxlKG1hdGNoU2NoZW1hKShtYXRjaCkgOiBmYWxzZTtcbiAgfTtcbn07XG5cbmNvbnN0IGNvbXBpbGVQcm9wc0Zyb21Tb3VsID0gKHByb3BNYXAsIHBhcmVudFNjaGVtYSkgPT4ge1xuICBjb25zdCBwYXR0ZXJuID0gcGF0aChbXCJzb3VsXCIsIFwicGF0dGVyblwiXSwgcGFyZW50U2NoZW1hKTtcbiAgY29uc3Qgcm91dGUgPSBwYXR0ZXJuICYmIG5ldyBSb3V0ZShwYXR0ZXJuKTtcblxuICByZXR1cm4gZGF0YSA9PiB7XG4gICAgY29uc3Qgc291bCA9IHBhdGgoW1wiX1wiLCBcIiNcIl0sIGRhdGEpO1xuICAgIGNvbnN0IHNvdWxQcm9wcyA9IHJvdXRlLm1hdGNoKHNvdWwpIHx8IHt9O1xuXG4gICAgcmV0dXJuICFrZXlzKHByb3BNYXApLmZpbmQocHJvcE5hbWUgPT4ge1xuICAgICAgaWYgKCEocHJvcE5hbWUgaW4gZGF0YSkpIHJldHVybiBmYWxzZTtcbiAgICAgIHJldHVybiBwcm9wKHByb3BOYW1lLCBzb3VsUHJvcHMpICE9PSBwcm9wKHByb3AocHJvcE5hbWUsIHByb3BNYXApLCBkYXRhKTtcbiAgICB9KTtcbiAgfTtcbn07XG5cbmNvbnN0IGNvbXBpbGVFZGdlTWF0Y2hlc0tleSA9IGFqdiA9PiBzY2hlbWEgPT4gKFxuICBkYXRhLFxuICBfY1BhdGgsXG4gIF9wYXJlbnREYXRhLFxuICBrZXlJblBhcmVudFxuKSA9PiAoc2NoZW1hID8gcHJvcChcIiNcIiwgZGF0YSkgPT09IGtleUluUGFyZW50IDogdHJ1ZSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0QWp2KHtcbiAgY29lcmNlVHlwZXMgPSB0cnVlLFxuICByZW1vdmVBZGRpdGlvbmFsID0gZmFsc2UsXG4gIC4uLmNvbmZpZ1xufSA9IHt9KSB7XG4gIGNvbnN0IGFqdiA9IG5ldyBBanYoeyBjb2VyY2VUeXBlcywgcmVtb3ZlQWRkaXRpb25hbCwgLi4uY29uZmlnIH0pO1xuXG4gIGFqdi5hZGRLZXl3b3JkKFwic291bFwiLCB7IGNvbXBpbGU6IGNvbXBpbGVWYWxpZGF0ZVNvdWwoYWp2KSB9KTtcbiAgYWp2LmFkZEtleXdvcmQoXCJlZGdlTWF0Y2hlc0tleVwiLCB7IGNvbXBpbGU6IGNvbXBpbGVFZGdlTWF0Y2hlc0tleShhanYpIH0pO1xuICBhanYuYWRkS2V5d29yZChcInByb3BzRnJvbVNvdWxcIiwgeyBjb21waWxlOiBjb21waWxlUHJvcHNGcm9tU291bCB9KTtcbiAgcmV0dXJuIGFqdjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN1cHByZXNzb3Ioe1xuICBpbml0ID0gaW5pdEFqdixcbiAgaWQgPSBcImh0dHA6Ly9leGFtcGxlLmNvbS9zY2hlbWFzL2d1bi1zY2hlbWEuanNvblwiLFxuICBqc29uU2NoZW1hID0gXCJodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA3L3NjaGVtYSNcIixcbiAgdGl0bGUgPSBcIkd1biBNZXNzYWdlIFNjaGVtYVwiLFxuICBkZXNjcmlwdGlvbiA9IFwiQSBkZWZpbnRpb24gZm9yIHRoZSBndW5EQiB3aXJlIHByb3RvY29sXCIsXG4gIGRlZmluaXRpb25zOiBzdXBwbGllZCA9IERFRkFVTFRfU0NIRU1BXG59ID0ge30pIHtcbiAgY29uc3Qgbm9kZVR5cGVzID0gW107XG4gIGNvbnN0IGRlZmluaXRpb25zID0ga2V5cyhzdXBwbGllZCkucmVkdWNlKChkZWZzLCB0eXBlTmFtZSkgPT4ge1xuICAgIGNvbnN0IHsgcGF0dGVybiB9ID0gcGF0aChbdHlwZU5hbWUsIFwic291bFwiXSwgZGVmcykgfHwge307XG5cbiAgICBpZiAoIXBhdHRlcm4pIHJldHVybiBkZWZzO1xuICAgIGNvbnN0IHJvdXRlID0gbmV3IFJvdXRlKHBhdHRlcm4pO1xuICAgIGNvbnN0IHBhdGhPclJlZiA9IHAgPT4ge1xuICAgICAgY29uc3QgdmFsID0gcGF0aChwLCBkZWZzKTtcbiAgICAgIGNvbnN0IHJlZiA9IHByb3AoXCIkcmVmc1wiLCB2YWwpO1xuICAgICAgY29uc3QgcmVmTmFtZSA9IHByb3AoXCJyZWZOYW1lXCIsIHJlZlJvdXRlLm1hdGNoKHJlZiB8fCBcIlwiKSk7XG5cbiAgICAgIHJldHVybiByZWZOYW1lID8gcHJvcChyZWZOYW1lLCBkZWZzKSA6IHZhbDtcbiAgICB9O1xuXG4gICAgbm9kZVR5cGVzLnB1c2godHlwZU5hbWUpO1xuICAgIHJldHVybiBjb21wb3NlKFxuICAgICAgYXNzb2NQYXRoKFt0eXBlTmFtZSwgXCIkYXN5bmNcIl0sIHRydWUpLFxuICAgICAgYXNzb2MoYCR7dHlwZU5hbWV9U291bGAsIHtcbiAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgcGF0dGVybjogcm91dGVUb1JlZ2V4U3RyKHJvdXRlKVxuICAgICAgfSksXG4gICAgICBhc3NvYyhgJHt0eXBlTmFtZX1FZGdlYCwge1xuICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBcIiNcIjogeyAkcmVmOiBgIy9kZWZpbml0aW9ucy8ke3R5cGVOYW1lfVNvdWxgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVxdWlyZWQ6IFtcIiNcIl1cbiAgICAgIH0pLFxuICAgICAgYXNzb2NQYXRoKFxuICAgICAgICBbdHlwZU5hbWUsIFwicmVxdWlyZWRcIl0sXG4gICAgICAgIFsuLi4ocGF0aChbdHlwZU5hbWUsIFwicmVxdWlyZWRcIl0sIGRlZnMpIHx8IFtdKSwgXCJfXCJdXG4gICAgICApLFxuICAgICAgYXNzb2NQYXRoKFt0eXBlTmFtZSwgXCJwcm9wZXJ0aWVzXCIsIFwiX1wiXSwge1xuICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICBhbGxPZjogW3sgJHJlZjogXCIjL2RlZmluaXRpb25zL0d1bk5vZGVNZXRhXCIgfV0sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBcIiNcIjogeyAkcmVmOiBgIy9kZWZpbml0aW9ucy8ke3R5cGVOYW1lfVNvdWxgIH0sXG4gICAgICAgICAgXCI+XCI6IHtcbiAgICAgICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBrZXlzKHBhdGhPclJlZihbdHlwZU5hbWUsIFwicHJvcGVydGllc1wiXSkpLnJlZHVjZShcbiAgICAgICAgICAgICAgKHByb3BzLCBrZXkpID0+IGFzc29jKGtleSwgeyB0eXBlOiBcIm51bWJlclwiIH0sIHByb3BzKSxcbiAgICAgICAgICAgICAge31cbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBwYXR0ZXJuUHJvcGVydGllczoga2V5cyhcbiAgICAgICAgICAgICAgcGF0aE9yUmVmKFt0eXBlTmFtZSwgXCJwYXR0ZXJuUHJvcGVydGllc1wiXSlcbiAgICAgICAgICAgICkucmVkdWNlKChwcm9wcywga2V5KSA9PiBhc3NvYyhrZXksIHsgdHlwZTogXCJudW1iZXJcIiB9LCBwcm9wcyksIHt9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICApKGRlZnMpO1xuICB9LCBzdXBwbGllZCk7XG5cbiAgY29uc3Qgc2NoZW1hID0ge1xuICAgICRpZDogaWQsXG4gICAgJHNjaGVtYToganNvblNjaGVtYSxcbiAgICAkYXN5bmM6IHRydWUsXG4gICAgdGl0bGUsXG4gICAgZGVzY3JpcHRpb24sXG4gICAgYW55T2Y6IFt7ICRyZWY6IFwiIy9kZWZpbml0aW9ucy9HdW5Nc2dcIiB9XSxcbiAgICBkZWZpbml0aW9uczoge1xuICAgICAgR3VuTXNnOiB7XG4gICAgICAgICRhc3luYzogdHJ1ZSxcbiAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgLy8gcmVxdWlyZWQ6IFtcIiNcIl0sIC8vIG5lY2Vzc2FyeSBvdmVyIHdpcmVcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgXCIjXCI6IHtcbiAgICAgICAgICAgIHRpdGxlOiBcIk1lc3NhZ2UgSWRlbnRpZmllclwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhpcyBzaG91bGQgYmUgYSBnbG9iYWxseSB1bmlxdWUgaWRlbnRpZmllclwiLFxuICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCIjI1wiOiB7XG4gICAgICAgICAgICB0aXRsZTogXCJGYXN0IEhhc2ggVmFsdWU/XCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJJIGhhdmUgbm8gaWRlYSBob3cgdGhpcyBpcyBjYWxjdWxhdGVkXCIsXG4gICAgICAgICAgICB0eXBlOiBcIm51bWJlclwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcIkBcIjoge1xuICAgICAgICAgICAgdGl0bGU6IFwiUmVzcG9uZGluZyBUb1wiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIG1lc3NhZ2UgaWRlbnRpZmllciB0aGlzIG1lc3NhZ2UgaXMgcmVzcG9uZGluZyB0b1wiLFxuICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCI+PFwiOiB7XG4gICAgICAgICAgICB0aXRsZTogXCJBZGphY2VudCBQZWVyc1wiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiTm90IHJlYWxseSBzdXJlIGhvdyB0aGlzIHdvcmtzXCIsXG4gICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiXG4gICAgICAgICAgfSxcbiAgICAgICAgICBvazoge1xuICAgICAgICAgICAgdGl0bGU6IFwiPz9cIixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlNob3VsZG4ndCBhY3R1YWxseSBiZSBzZW50IG92ZXIgd2lyZVwiLFxuICAgICAgICAgICAgdHlwZTogXCJib29sZWFuXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIGhvdzoge1xuICAgICAgICAgICAgdGl0bGU6IFwiVXNlZCBmb3IgZGVidWdnaW5nXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJTaG91bGRuJ3QgYWN0dWFsbHkgYmUgc2VudCBvdmVyIHdpcmUgKGJ1dCBpdCBpcylcIixcbiAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1lc2g6IHtcbiAgICAgICAgICAgIHRpdGxlOiBcIj8/XCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJTaG91bGRuJ3QgYmUgc2VudCBvdmVyIHdpcmVcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyOiB7XG4gICAgICAgICAgICBhbnlPZjogW3sgdHlwZTogXCJudWxsXCIgfSwgeyB0eXBlOiBcInN0cmluZ1wiIH1dXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsZWVjaDoge1xuICAgICAgICAgICAgdGl0bGU6IFwiTGVlY2ggQ29tbWFuZFwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiR3VuIHByb3RvY29sIGV4dGVuc2lvbiBhZGRlZCBieSBwaXN0b2xcIixcbiAgICAgICAgICAgIHR5cGU6IFwiYm9vbGVhblwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICBnZXQ6IHtcbiAgICAgICAgICAgIHRpdGxlOiBcIkdldCBDb21tYW5kXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJBIHJlcXVlc3QgZm9yIGdyYXBoIGRhdGFcIixcbiAgICAgICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UsXG4gICAgICAgICAgICByZXF1aXJlZDogW1wiI1wiXSxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgXCIjXCI6IHtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgc291bCB0byByZXF1ZXN0IGRhdGEgZm9yXCIsXG4gICAgICAgICAgICAgICAgYW55T2Y6IG5vZGVUeXBlcy5tYXAobmFtZSA9PiAoe1xuICAgICAgICAgICAgICAgICAgJHJlZjogYCMvZGVmaW5pdGlvbnMvJHtuYW1lfVNvdWxgXG4gICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFwiLlwiOiB7XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiUmVxdWVzdCBhIHNpbmdsZSBwcm9wZXJ0eT9cIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHB1dDoge1xuICAgICAgICAgICAgJGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgdGl0bGU6IFwiUHV0IENvbW1hbmRcIixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkEgcGF5bG9hZCBvZiBncmFwaCBkYXRhXCIsXG4gICAgICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgYW55T2Y6IG5vZGVUeXBlcy5tYXAobmFtZSA9PiAoe1xuICAgICAgICAgICAgICAgICRyZWY6IGAjL2RlZmluaXRpb25zLyR7bmFtZX1gXG4gICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIEd1bkNoYW5nZVN0YXRlczoge1xuICAgICAgICB0eXBlOiBcIm9iamVjdFwiLFxuICAgICAgICB0aXRsZTogXCJHdW4gQ2hhbmdlIFN0YXRlc1wiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJBIG1hcCBvZiBwcm9wZXJ0eSBuYW1lcyB0byB1cGRhdGUgdGltZXN0YW1wc1wiLFxuICAgICAgICBwYXR0ZXJuUHJvcGVydGllczoge1xuICAgICAgICAgIFwiLipcIjoge1xuICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIlxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIEd1bk5vZGVNZXRhOiB7XG4gICAgICAgIHRpdGxlOiBcIkd1biBOb2RlIE1ldGFkYXRhXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNoYW5nZSBTdGF0ZSBhbmQgc291bCBvZiBhIGd1biBub2RlXCIsXG4gICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIFwiI1wiOiB7IHRpdGxlOiBcIlNvdWxcIiwgdHlwZTogXCJzdHJpbmdcIiB9LFxuICAgICAgICAgIFwiPlwiOiB7ICRyZWY6IFwiIy9kZWZpbml0aW9ucy9HdW5DaGFuZ2VTdGF0ZXNcIiB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlcXVpcmVkOiBbXCIjXCIsIFwiPlwiXVxuICAgICAgfSxcbiAgICAgIEd1bkVkZ2U6IHtcbiAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgXCIjXCI6IHsgdHlwZTogXCJzdHJpbmdcIiB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlcXVpcmVkOiBbXCIjXCJdXG4gICAgICB9LFxuICAgICAgLi4uZGVmaW5pdGlvbnNcbiAgICB9XG4gIH07XG4gIGNvbnN0IGFqdiA9IGluaXQoKTtcblxuICBhanYuYWRkU2NoZW1hKHtcbiAgICAkaWQ6IFwic2NoZW1hLmpzb25cIixcbiAgICBkZWZpbml0aW9uczogc2NoZW1hLmRlZmluaXRpb25zXG4gIH0pO1xuICByZXR1cm4geyBzY2hlbWEsIHZhbGlkYXRlOiBhanYuY29tcGlsZShzY2hlbWEpIH07XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzFfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzJfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzNfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzRfXzsiXSwic291cmNlUm9vdCI6IiJ9